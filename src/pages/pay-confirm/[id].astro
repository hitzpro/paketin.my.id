---
// src/pages/pay-confirm/[id].astro
export const prerender = false;
import Layout from '../../layouts/Layout.astro';
const { id } = Astro.params;
---

<Layout title="Konfirmasi Pembayaran">
    <div id="pay-confirm-wrapper" data-checkout-id={id} class="min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center p-4">
        
        <div id="confirm-container" class="w-full max-w-sm bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-xl text-center transition-all duration-300">
            <div class="w-16 h-16 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fa-solid fa-fingerprint text-3xl"></i>
            </div>
            <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Konfirmasi Bayar</h2>
            <p class="text-gray-500 text-sm mb-6">Lanjutkan pembayaran untuk Transaksi <b>#{id}</b>?</p>
            
            <button id="btn-pay-confirm" class="btn btn-primary w-full rounded-xl text-white font-bold py-3 shadow-lg hover:shadow-xl transition-all active:scale-95">
                Bayar Sekarang
            </button>
        </div>

        <div id="success-container" class="hidden w-full max-w-sm bg-white dark:bg-gray-800 p-6 rounded-3xl shadow-xl text-center animate-in zoom-in duration-500">
            <div class="w-16 h-16 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce">
                <i class="fa-solid fa-check text-3xl"></i>
            </div>
            <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">Pembayaran Berhasil!</h2>
            <p class="text-gray-500 text-sm">Silakan cek perangkat utama Anda.</p>
        </div>

    </div>
</Layout>

<script>
    import { initPayConfirm } from '../../scripts/pages/pay-confirm.js';
    
    document.addEventListener('astro:page-load', () => {
        const wrapper = document.getElementById('pay-confirm-wrapper');
        if (wrapper) {
            const checkoutId = wrapper.dataset.checkoutId;
            initPayConfirm(checkoutId);
        }
    });
</script>