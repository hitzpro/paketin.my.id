---
// src/components/home/RecomSection.astro
import ProductCard from "../products/Product-Card.astro";

const { recommendedProducts } = Astro.props;

// LOGIKA: Return null jika data kosong
if (!recommendedProducts || recommendedProducts.length === 0) {
  return null;
}
---

<section class="relative mt-8 mb-8 mx-1 py-6 px-4 rounded-2xl 
                border-2 border-dashed border-indigo-400 dark:border-indigo-600
                bg-gradient-to-br from-indigo-50/50 to-blue-50/50 
                dark:from-indigo-950/20 dark:to-blue-950/20">
  
  <div class="absolute -top-4 left-4 md:left-8">
    <div class="relative flex items-center justify-center">
      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"></span>
      <div class="relative inline-flex items-center gap-2 px-4 py-1.5 
                  bg-indigo-600 text-white text-xs md:text-sm font-bold uppercase tracking-wider 
                  rounded-full shadow-lg shadow-indigo-500/40 transform hover:scale-105 transition-transform">
        <span>âœ¨ Spesial Untukmu</span>
      </div>
    </div>
  </div>

  <div class="flex justify-between items-end mb-6 pt-2">
    <div>
      <h3 class="text-xl md:text-2xl font-extrabold text-gray-800 dark:text-white leading-tight">
        Pilihan AI Cerdas ðŸ¤–
      </h3>
      <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
        Dikurasi berdasarkan kebiasaan belanjamu
      </p>
    </div>
  </div>

  <div class="flex overflow-x-auto pb-4 -mx-2 px-2 gap-4 snap-x scrollbar-hide 
              md:grid md:grid-cols-2 lg:grid-cols-4 md:overflow-visible">
    
    {recommendedProducts.map((product: any) => (
      <div class="min-w-[260px] w-[260px] md:w-auto md:min-w-0 snap-center transition-transform hover:-translate-y-1 duration-300">
        <ProductCard
          id={product.id}
          title={product.product_name}
          description={product.description}
          price={`Rp ${product.price}`}
          category={product.category}
          type={product.type} 
          image={product.image}
        />
      </div>
    ))}
  </div>

</section>