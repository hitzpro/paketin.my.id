---
// src/components/products/ProductAccordion.astro
interface Props {
  items: {
    id: string;
    title: string;
    icon: string;
    content: string; // Bisa HTML string
    isOpen?: boolean;
  }[];
}

const { items } = Astro.props;
---

<div class="accordion divide-y divide-gray-200 dark:divide-gray-700 border border-gray-200 dark:border-gray-700 rounded-xl bg-white dark:bg-gray-800 shadow-sm transition-colors duration-300">
  {items.map((item) => (
    <div class={`accordion-item group ${item.isOpen ? 'active' : ''}`} id={item.id}>
      <button 
        class="accordion-toggle w-full inline-flex items-center justify-between p-4 text-start text-gray-800 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200 focus:outline-none" 
        aria-controls={`${item.id}-collapse`} 
        aria-expanded={item.isOpen ? 'true' : 'false'}
      >
        <span class="inline-flex items-center gap-x-3 font-semibold">
          <i class={`fa-solid ${item.icon} text-blue-600 dark:text-blue-400 text-lg`}></i>
          {item.title}
        </span>
        <i class="fa-solid fa-chevron-down text-gray-400 dark:text-gray-500 transition-transform duration-300 group-[.active]:rotate-180"></i>
      </button>
      
      <div 
        id={`${item.id}-collapse`} 
        class={`accordion-content w-full overflow-hidden transition-all duration-300 ease-in-out ${item.isOpen ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'}`}
        aria-labelledby={item.id} 
        role="region"
      >
        <div class="px-5 pb-4 pt-2 text-gray-600 dark:text-gray-300 text-sm leading-relaxed border-t border-gray-100 dark:border-gray-700/50">
            <Fragment set:html={item.content} />
        </div>
      </div>
    </div>
  ))}
</div>

<script>
  import { initAccordion } from '../../scripts/ui/accordion.js';
  
  document.addEventListener('astro:page-load', () => {
      initAccordion();
  });
</script>