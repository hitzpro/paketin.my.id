---
const { id, title, description, price, image, category, type } = Astro.props; 

// LOGIKA DINAMIS
const isPulsa = type === 'CREDIT' || category === 'Top-up Promo';

const badgeColor = isPulsa ? "bg-yellow-500" : "bg-blue-600";
const badgeText = isPulsa ? "Pulsa" : "Kuota";
---

<div class="relative w-[260px] sm:w-[280px] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm hover:shadow-md transition-all flex flex-col h-full group">

  <figure class="w-full h-36 overflow-hidden rounded-t-lg bg-gray-100 dark:bg-gray-700 relative">
    <img 
      src={image || "https://placehold.co/400x300?text=No+Image"} 
      alt={title}
      class="w-full h-full object-cover transition-transform duration-500 hover:scale-110"
    >
    <div class="absolute top-2 right-2 bg-white/90 p-1.5 rounded-full shadow-sm">
        <i class={`fa-solid ${isPulsa ? 'fa-mobile-screen text-yellow-600' : 'fa-wifi text-blue-600'} text-sm`}></i>
    </div>
  </figure>

  <div class="p-4 flex flex-col flex-1">
    
    <div class="flex justify-between items-start mb-1 gap-2">
      <div>
          <span class="text-[10px] text-gray-400 uppercase font-bold block mb-0.5">{category}</span>
          <h5 class="font-bold text-gray-800 dark:text-gray-100 text-base line-clamp-1" title={title}>{title}</h5>
      </div>
      <span class={`text-[10px] font-bold px-2 py-0.5 rounded-md text-white whitespace-nowrap ${badgeColor}`}>
        {badgeText}
      </span>
    </div>

    <p class="text-sm text-gray-600 dark:text-gray-400 flex-1 line-clamp-2 mt-1">{description}</p>

    <p class="text-primary dark:text-blue-400 font-bold mt-3 text-lg">{price}</p>

    <div class="flex items-center justify-between mt-3">
      <a href={`/produk/${id}`} class="btn btn-primary btn-sm px-4 rounded-md text-white no-underline flex-1 mr-2">
        Beli Sekarang
      </a>

      <button 
        class="btn btn-ghost btn-sm p-2 rounded-md btn-wishlist text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-600"
        data-product-id={id}
      >
        <i class="fa-regular fa-heart text-lg"></i>
      </button>
    </div>
  </div>
</div>